<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tarot – rozkłady w przeglądarce</title>
  <link rel="icon" href="data:,">
  <link rel="stylesheet" href="./styles.css" />
  <script defer src="./app.js"></script>
  <link rel="manifest" href="./manifest.webmanifest">
<meta name="theme-color" content="#0f1226">
<link rel="apple-touch-icon" href="icons/icon-192.png"> <!-- iOS ikona (może być 180–192px) -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>
  <header>
    <div class="wrap">
      <h1><span class="logo"></span> Tarot – rozkłady w przeglądarce</h1>

      <div class="controls" role="group" aria-label="Sterowanie rozkładem">
        <label for="spread" class="sr-only">Typ rozkładu</label>
        <select id="spread" aria-label="Typ rozkładu">
          <option value="one">1 karta – szybka wskazówka</option>
          <option value="three" selected>3 karty – Przeszłość / Teraźniejszość / Przyszłość</option>
          <option value="celtic">Krzyż celtycki – 10 kart</option>
          <option value="zwiazek6">Związek – 6 kart</option>
          <option value="decyzja6">Decyzja – 6 kart (2×3 + wynik)</option>
          <option value="krzyzEgipski5">Krzyż egipski – 5 kart</option>
<option value="drzewo7">Drzewo – 7 kart</option>
<option value="liniaCzasu6">Linia czasu – 6 kart</option>
<option value="relacja7">Relacja – 7 kart</option>
<option value="decyzja7">Decyzja – 7 kart (2×3 + doradca)</option>
<option value="kariera6">Kariera / Projekt – 6 kart</option>
<option value="zdrowie5">Dobrostan – 5 kart</option>
<option value="rok12">Rok – 12 kart (miesiące)</option>

        </select>

        <span class="checkbox">
          <input id="reversed" type="checkbox" checked />
          <label for="reversed">Uwzględniaj odwrócone karty</label>
        </span>

        <button id="shuffle" class="accent">Tasuj talię</button>
        <button id="draw" class="primary">Rozłóż karty</button>
        <button id="reset" class="ghost">Wyczyść</button>

        <!-- Wgrywanie własnej talii: folder (desktop/Android) -->
        <label class="filebtn" id="btnDeckFolder">
          <input id="deckFolder" type="file" webkitdirectory directory multiple hidden>
          <span>Wczytaj folder talii</span>
        </label>

        <!-- Wgrywanie własnej talii: wiele plików (mobile/iOS) -->
        <label class="filebtn" id="btnDeckFiles">
          <input id="deckFiles" type="file" multiple accept=".png,.jpg,.jpeg,.webp,.heic,image/*" hidden>
          <span>Wczytaj pliki (mobile)</span>
        </label>
        <!-- przyciski (w okolicy istniejących kontrolek) -->
<button id="btnLoadZip">Wczytaj ZIP talii</button>
<input id="zipInput" type="file" accept=".zip" hidden>

        <button id="clearDeck" class="ghost">Wyczyść talię</button>
        <button id="saveDeck" class="accent">Zapisz talię (offline)</button>
        <button id="deleteSavedDeck" class="ghost">Usuń zapisaną talię</button>
        <span id="deckStatus" class="muted" aria-live="polite"></span>
        <button id="deckInfoBtn" class="ghost">Szczegóły talii</button>
      </div>
    </div>
  </header>

  <div class="wrap">
    <main>
      <section aria-live="polite" aria-label="Plansza z kartami">
        <div id="board"></div>
      </section>

      <aside>
        <div class="reading-head">
          <h2>Interpretacja</h2>
          <div><button id="copy" class="accent">Kopiuj opis</button></div>
        </div>
        <div id="reading" class="reading-list" aria-live="polite"></div>
      </aside>
    </main>
  </div>

  <footer class="wrap">
    Dla zabawy i refleksji. Tarot nie zastępuje porady prawnej, finansowej ani medycznej.
    By@MaciejR.
  </footer>

  <!-- Panel: Szczegóły talii -->
  <div id="deckInfo" class="deckinfo" hidden>
    <div class="panel" role="dialog" aria-label="Szczegóły talii">
      <div class="head">
        <h3>Szczegóły talii</h3>
        <button id="deckInfoClose" class="ghost">Zamknij ✕</button>
      </div>

      <div id="deckInfoSummary" class="summary"></div>

      <div class="filters">
        <label><input type="radio" name="deckFilter" value="all" checked> Wszystkie</label>
        <label><input type="radio" name="deckFilter" value="custom"> Tylko własne</label>
        <label><input type="radio" name="deckFilter" value="default"> Tylko domyślne</label>
      </div>

      <div id="deckInfoList" class="list"></div>
    </div>
  </div>
<!-- JS: najpierw JSZip, potem Twoje app.js -->
<script src="./vendor/jszip.min.js"></script>
<script src="./spreads-extra.js"></script>
<script src="./app.js?v=8"></script>
</body>
</html>
